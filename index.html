<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather App - 5 Day Forecast</title>
    <meta property="og:title" content="Weather App - Check Weather Anywhere">
    <meta property="og:description" content="Get real-time weather information and 5-day forecast for any city in the world!">
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        // Lucide React icons as SVG components
        const Sun = ({ size = 64, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <circle cx="12" cy="12" r="4"></circle>
                <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"></path>
            </svg>
        );

        const Cloud = ({ size = 64, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"></path>
            </svg>
        );

        const CloudRain = ({ size = 64, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242M16 14v6M8 14v6M12 16v6"></path>
            </svg>
        );

        const CloudSnow = ({ size = 64, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242M8 15h.01M8 19h.01M12 17h.01M12 21h.01M16 15h.01M16 19h.01"></path>
            </svg>
        );

        const Wind = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path>
            </svg>
        );

        const Droplets = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"></path>
                <path d="M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"></path>
            </svg>
        );

        const Eye = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                <circle cx="12" cy="12" r="3"></circle>
            </svg>
        );

        const Gauge = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="m12 14 4-4"></path>
                <path d="M3.34 19a10 10 0 1 1 17.32 0"></path>
            </svg>
        );

        function WeatherApp() {
            const [city, setCity] = useState('');
            const [weather, setWeather] = useState(null);
            const [forecast, setForecast] = useState(null);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');
            const [suggestions, setSuggestions] = useState([]);

            const API_KEY = '898f8fe6d309f8b26ce6c868252bfa98'; // Your OpenWeatherMap API key

            const popularPakistanCities = [
                'Karachi', 'Lahore', 'Islamabad', 'Rawalpindi', 'Faisalabad',
                'Multan', 'Peshawar', 'Quetta', 'Sialkot', 'Gujranwala'
            ];

            const getWeatherIcon = (weatherMain, size = 64) => {
                const iconProps = { size: size, className: "text-white" };
                switch (weatherMain?.toLowerCase()) {
                    case 'clear':
                        return <Sun {...iconProps} />;
                    case 'clouds':
                        return <Cloud {...iconProps} />;
                    case 'rain':
                    case 'drizzle':
                        return <CloudRain {...iconProps} />;
                    case 'snow':
                        return <CloudSnow {...iconProps} />;
                    default:
                        return <Cloud {...iconProps} />;
                }
            };

            const fetchWeather = async (searchCity = city) => {
                const cityName = searchCity.trim();
                if (!cityName) {
                    setError('Please enter a city name');
                    return;
                }

                setLoading(true);
                setError('');
                setSuggestions([]);

                try {
                    const weatherResponse = await fetch(
                        `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(cityName)}&appid=${API_KEY}&units=metric`
                    );

                    if (!weatherResponse.ok) {
                        const errorData = await weatherResponse.json();
                        throw new Error(errorData.message || 'City not found');
                    }

                    const weatherData = await weatherResponse.json();
                    setWeather(weatherData);
                    setCity(cityName);

                    const forecastResponse = await fetch(
                        `https://api.openweathermap.org/data/2.5/forecast?lat=${weatherData.coord.lat}&lon=${weatherData.coord.lon}&appid=${API_KEY}&units=metric`
                    );

                    if (forecastResponse.ok) {
                        const forecastData = await forecastResponse.json();
                        const dailyForecast = forecastData.list.filter((item, index) => index % 8 === 0).slice(0, 5);
                        setForecast(dailyForecast);
                    }

                    setError('');
                } catch (err) {
                    console.error('API Error:', err);
                    setError(`Unable to fetch weather data. ${err.message}. Please try:`);
                    setSuggestions(popularPakistanCities.filter(c => c.toLowerCase() !== cityName.toLowerCase()));
                    setWeather(null);
                    setForecast(null);
                } finally {
                    setLoading(false);
                }
            };

            const handleSuggestionClick = (suggestedCity) => {
                setCity(suggestedCity);
                fetchWeather(suggestedCity);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 flex items-center justify-center p-4">
                    <div className="w-full max-w-4xl">
                        <div className="bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-white/20">
                            <h1 className="text-4xl font-bold text-white text-center mb-8">
                                üå§Ô∏è Weather App
                            </h1>

                            <div className="mb-8">
                                <div className="flex gap-2">
                                    <input
                                        type="text"
                                        value={city}
                                        onChange={(e) => setCity(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && fetchWeather()}
                                        placeholder="Enter city name..."
                                        className="flex-1 px-4 py-3 rounded-xl bg-white/20 backdrop-blur-sm text-white placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-white/50"
                                    />
                                    <button
                                        onClick={fetchWeather}
                                        disabled={loading}
                                        className="px-6 py-3 bg-white/30 hover:bg-white/40 text-white font-semibold rounded-xl transition-all backdrop-blur-sm border border-white/30 disabled:opacity-50"
                                    >
                                        {loading ? '...' : 'Search'}
                                    </button>
                                </div>
                            </div>

                            {error && (
                                <div className="bg-red-500/20 backdrop-blur-sm border border-red-300/50 text-white p-4 rounded-xl mb-6">
                                    <p className="mb-3 font-semibold">‚ö†Ô∏è {error}</p>
                                    <p className="text-sm mb-3 text-white/80">
                                        The API key might be invalid. To fix this:
                                    </p>
                                    <ol className="text-sm text-white/90 mb-3 list-decimal list-inside space-y-1">
                                        <li>Go to <a href="https://openweathermap.org/api" target="_blank" className="underline">openweathermap.org/api</a></li>
                                        <li>Sign up for a FREE account</li>
                                        <li>Get your API key (takes 2 minutes)</li>
                                        <li>Replace the API_KEY in the code with your key</li>
                                    </ol>
                                    {suggestions.length > 0 && (
                                        <>
                                            <p className="text-sm mb-2">Or try these cities:</p>
                                            <div className="flex flex-wrap gap-2">
                                                {suggestions.map((suggestion, index) => (
                                                    <button
                                                        key={index}
                                                        onClick={() => handleSuggestionClick(suggestion)}
                                                        className="px-3 py-1 bg-white/20 hover:bg-white/30 rounded-lg text-sm transition-all"
                                                    >
                                                        {suggestion}
                                                    </button>
                                                ))}
                                            </div>
                                        </>
                                    )}
                                </div>
                            )}

                            {weather && (
                                <div className="space-y-6">
                                    <div className="text-center">
                                        <h2 className="text-3xl font-bold text-white mb-2">
                                            {weather.name}, {weather.sys.country}
                                        </h2>
                                        <div className="flex justify-center mb-4">
                                            {getWeatherIcon(weather.weather[0].main)}
                                        </div>
                                        <div className="text-6xl font-bold text-white mb-2">
                                            {Math.round(weather.main.temp)}¬∞C
                                        </div>
                                        <p className="text-xl text-white/90 capitalize">
                                            {weather.weather[0].description}
                                        </p>
                                    </div>

                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        <div className="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20">
                                            <div className="flex items-center gap-2 mb-2">
                                                <Droplets size={20} className="text-white/80" />
                                                <span className="text-white/80 text-sm">Humidity</span>
                                            </div>
                                            <p className="text-2xl font-bold text-white">
                                                {weather.main.humidity}%
                                            </p>
                                        </div>

                                        <div className="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20">
                                            <div className="flex items-center gap-2 mb-2">
                                                <Wind size={20} className="text-white/80" />
                                                <span className="text-white/80 text-sm">Wind Speed</span>
                                            </div>
                                            <p className="text-2xl font-bold text-white">
                                                {weather.wind.speed} m/s
                                            </p>
                                        </div>

                                        <div className="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20">
                                            <div className="flex items-center gap-2 mb-2">
                                                <Gauge size={20} className="text-white/80" />
                                                <span className="text-white/80 text-sm">Pressure</span>
                                            </div>
                                            <p className="text-2xl font-bold text-white">
                                                {weather.main.pressure} hPa
                                            </p>
                                        </div>

                                        <div className="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20">
                                            <div className="flex items-center gap-2 mb-2">
                                                <Eye size={20} className="text-white/80" />
                                                <span className="text-white/80 text-sm">Visibility</span>
                                            </div>
                                            <p className="text-2xl font-bold text-white">
                                                {(weather.visibility / 1000).toFixed(1)} km
                                            </p>
                                        </div>
                                    </div>

                                    <div className="bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20">
                                        <div className="flex justify-between text-white/90 text-sm">
                                            <span>Feels like: {Math.round(weather.main.feels_like)}¬∞C</span>
                                            <span>Min: {Math.round(weather.main.temp_min)}¬∞C</span>
                                            <span>Max: {Math.round(weather.main.temp_max)}¬∞C</span>
                                        </div>
                                    </div>

                                    {forecast && (
                                        <div className="mt-6">
                                            <h3 className="text-2xl font-bold text-white mb-4">5-Day Forecast</h3>
                                            <div className="grid grid-cols-5 gap-2">
                                                {forecast.map((day, index) => {
                                                    const date = new Date(day.dt * 1000);
                                                    const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });
                                                    return (
                                                        <div key={index} className="bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20 text-center">
                                                            <p className="text-white/90 text-sm font-semibold mb-2">{dayName}</p>
                                                            <div className="flex justify-center mb-2">
                                                                {getWeatherIcon(day.weather[0].main, 32)}
                                                            </div>
                                                            <p className="text-white font-bold text-lg">{Math.round(day.main.temp)}¬∞C</p>
                                                            <p className="text-white/70 text-xs mt-1 capitalize">{day.weather[0].description}</p>
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                        </div>
                                    )}
                                </div>
                            )}

                            {!weather && !error && (
                                <div className="text-center text-white/80 py-8">
                                    <p className="text-lg mb-6">Enter a city name to see the weather</p>
                                    <div className="space-y-3">
                                        <p className="text-sm text-white/60">Popular Pakistani Cities:</p>
                                        <div className="flex flex-wrap justify-center gap-2">
                                            {popularPakistanCities.map((popularCity, index) => (
                                                <button
                                                    key={index}
                                                    onClick={() => handleSuggestionClick(popularCity)}
                                                    className="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm transition-all"
                                                >
                                                    {popularCity}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<WeatherApp />, document.getElementById('root'));
    </script>
</body>
</html>
